<!-- Filter-Bereich AUSSERHALB der map-component-wrapper -->
<div class="filter-section">
  <div class="filter-container">
    <button 
      class="filter-btn" 
      [class.active]="activeFilter() === 'all'"
      (click)="filterLakes('all')"
      title="Alle Seen anzeigen">
      ğŸ—ºï¸ Alle Seen ({{totalLakes}})
    </button>
    
    <button 
      class="filter-btn free-fishing" 
      [class.active]="activeFilter() === 'free'"
      (click)="filterLakes('free')"
      title="Nur patentfreie Seen">
      ğŸ£ Gratis Fischen ({{freeFishingCount}})
    </button>

    <!-- Fischarten Dropdown -->
    <div class="filter-dropdown" [class.open]="isFishDropdownOpen">
      <button 
        class="filter-btn dropdown-toggle" 
        [class.active]="activeFilter() === 'fish'"
        (click)="toggleFishDropdown($event)">
        ğŸŸ Nach Fischart
      </button>
      <div class="dropdown-content">
        <button (click)="filterByFishSpecies('Hecht')" class="dropdown-item">Hecht</button>
        <button (click)="filterByFishSpecies('Forelle')" class="dropdown-item">Forelle</button>
        <button (click)="filterByFishSpecies('Zander')" class="dropdown-item">Zander</button>
        <button (click)="filterByFishSpecies('Barsch')" class="dropdown-item">Barsch</button>
        <button (click)="filterByFishSpecies('Felchen')" class="dropdown-item">Felchen</button>
        <button (click)="filterByFishSpecies('Saibling')" class="dropdown-item">Saibling</button>
      </div>
    </div>

    <!-- Kantone Dropdown -->
    <div class="filter-dropdown" [class.open]="isRegionDropdownOpen">
      <button 
        class="filter-btn dropdown-toggle" 
        [class.active]="activeFilter() === 'region'"
        (click)="toggleRegionDropdown($event)">
        ğŸ“ Nach Kanton
      </button>
      <div class="dropdown-content">
        <button (click)="filterByRegion('Bern')" class="dropdown-item">Bern</button>
        <button (click)="filterByRegion('ZÃ¼rich')" class="dropdown-item">ZÃ¼rich</button>
        <button (click)="filterByRegion('Luzern')" class="dropdown-item">Luzern</button>
        <button (click)="filterByRegion('GraubÃ¼nden')" class="dropdown-item">GraubÃ¼nden</button>
        <button (click)="filterByRegion('Tessin')" class="dropdown-item">Tessin</button>
        <button (click)="filterByRegion('Waadt')" class="dropdown-item">Waadt</button>
        <button (click)="filterByRegion('Wallis')" class="dropdown-item">Wallis</button>
      </div>
    </div>

    <button 
      class="filter-btn reset-btn" 
      (click)="filterLakes('all')"
      *ngIf="activeFilter() !== 'all'"
      title="Filter zurÃ¼cksetzen">
      âŒ Filter zurÃ¼cksetzen
    </button>
  </div>
</div>

<!-- Karten-Bereich -->
<div class="map-component-wrapper">
  <div class="layout">
    <div id="map"></div>
  </div>
</div>

<!-- Sidebar auÃŸerhalb, fixed am rechten Rand -->
<div class="sidebar" [class.open]="isSidebarOpen()">
  <button class="close-button" (click)="closeSidebar()">&times;</button>
  <div class="sidebar-content" *ngIf="selectedLakeData">
    <h2>{{selectedLakeData.name}}</h2>
    
    <!-- Link zur Detail-Seite -->
    <a [routerLink]="['/lake', selectedLakeData.id || getLakeId(selectedLakeData.name)]" class="detail-link">
      ğŸ“‹ Alle Details ansehen
    </a>
    
    <div class="lake-section">
      <h3>ğŸ“Š Allgemeine Informationen</h3>
      <div class="lake-info">
        <div class="info-row">
          <span class="info-label">FlÃ¤che:</span>
          <span class="info-value">{{selectedLakeData.area}}</span>
        </div>
        <div class="info-row">
          <span class="info-label">Maximale Tiefe:</span>
          <span class="info-value">{{selectedLakeData.maxDepth}}</span>
        </div>
        <div class="info-row">
          <span class="info-label">HÃ¶he Ã¼ber Meer:</span>
          <span class="info-value">{{selectedLakeData.elevation}}</span>
        </div>
        <div class="info-row">
          <span class="info-label">Kantone:</span>
          <span class="info-value">{{selectedLakeData.cantons}}</span>
        </div>
      </div>
    </div>

    <div class="lake-section">
      <h3>ğŸ£ Fischereiinformationen</h3>
      <div class="lake-info">
        <div class="info-row">
          <span class="info-label">Beste Saison:</span>
          <span class="info-value">{{selectedLakeData.bestSeason}}</span>
        </div>
        <div class="info-row">
          <span class="info-label">Gratis Fischen:</span>
          <span class="info-value" [class.free-fishing]="selectedLakeData.freeFishing">
            {{selectedLakeData.freeFishing ? 'Ja' : 'Nein'}}
          </span>
        </div>
        <div class="info-row">
          <span class="info-label">Bewilligung:</span>
          <span class="info-value permit">{{selectedLakeData.permitRequired}}</span>
        </div>
      </div>
    </div>

    <div class="lake-section">
      <h3>ğŸŸ Fischarten</h3>
      <div class="fish-species">
        <span class="fish-tag" *ngFor="let fish of selectedLakeData.fishSpecies">{{fish}}</span>
      </div>
    </div>
  </div>
</div>